{"remainingRequest":"C:\\F\\vueProject\\learnvue\\node_modules\\babel-loader\\lib\\index.js!C:\\F\\vueProject\\learnvue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\F\\vueProject\\learnvue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\F\\vueProject\\learnvue\\src\\components\\Search.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\F\\vueProject\\learnvue\\src\\components\\Search.vue","mtime":1637517460192},{"path":"C:\\F\\vueProject\\learnvue\\babel.config.js","mtime":1637408306000},{"path":"C:\\F\\vueProject\\learnvue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1637373665000},{"path":"C:\\F\\vueProject\\learnvue\\node_modules\\babel-loader\\lib\\index.js","mtime":1637373673000},{"path":"C:\\F\\vueProject\\learnvue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1637373665000},{"path":"C:\\F\\vueProject\\learnvue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1637373672000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJDOlxcRlxcdnVlUHJvamVjdFxcbGVhcm52dWVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXHRvQ29uc3VtYWJsZUFycmF5LmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxGXFx2dWVQcm9qZWN0XFxsZWFybnZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0IFNlYXJjaEJhciBmcm9tICJAL2NvbXBvbmVudHMvU2VhcmNoQmFyIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHsgcmVhY3RpdmUsIHJlZiB9IGZyb20gIkB2dWUvcmVhY3Rpdml0eSI7CmltcG9ydCB1c2VDbGlwYm9hcmQgZnJvbSAidnVlLWNsaXBib2FyZDMiOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgU2VhcmNoQmFyOiBTZWFyY2hCYXIKICB9LAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIC8v5b2T5YmN5pCc57Si55qE6aG15pWwCiAgICB2YXIgcGFnZSA9IDE7CiAgICB2YXIgZGF0YUNvZGUgPSByZWYoIiIpOwogICAgdmFyIGRhdGEgPSByZWFjdGl2ZShbXSk7CiAgICB2YXIgc2VhcmNoVmFsdWUgPSByZWYoIiIpOwoKICAgIHZhciBsb2FkSG90ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoc2VhcmNoVGl0bGUpIHsKICAgICAgICB2YXIgZ2V0RGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAvL+WmguaenOabtOaNouS6huaQnOe0ouivjSDlsLHliKDpmaTkuYvliY3nmoTliJfooajmlbDmja4g6YeN6L295paw5pCc57Si6K+N55qE57uT5p6cCiAgICAgICAgICAgICAgICBpZiAoc2VhcmNoVmFsdWUudmFsdWUgIT0gc2VhcmNoVGl0bGUgJiYgc2VhcmNoVmFsdWUudmFsdWUgIT0gIiIpIHsKICAgICAgICAgICAgICAgICAgZGF0YS5zcGxpY2UoMCk7CiAgICAgICAgICAgICAgICB9IC8v5Lyg6YCS6L+H5p2l55qEc2VhcmNoVmFsdWUg6K6+572u5oiQ57uE5Lu25YWo5bGA5Y+Y6YePIOaWueS+v+afpeeci+abtOWkmuaVsOaNrgoKCiAgICAgICAgICAgICAgICBzZWFyY2hWYWx1ZS52YWx1ZSA9IHNlYXJjaFRpdGxlOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgiYXBpL3Riay9zdXBlcl9zZWFyY2giLCB7CiAgICAgICAgICAgICAgICAgIGFwaWtleTogInljcTloeEdHWWRVRzdHVGRrSEJoUVE3N1VzaVpGVzJoIiwKICAgICAgICAgICAgICAgICAgcTogc2VhcmNoVGl0bGUsCiAgICAgICAgICAgICAgICAgIHNvcnQ6ICJ0b3RhbF9zYWxlcyIsCiAgICAgICAgICAgICAgICAgIHBhZ2Vfc2l6ZTogMjAsCiAgICAgICAgICAgICAgICAgIHBhZ2Vfb246IHBhZ2UKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBnZXREYXRhID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIC8v6I635Y+WQVBJ6K+35rGC5Luj56CBCiAgICAgICAgICAgICAgICBkYXRhQ29kZS52YWx1ZSA9IGdldERhdGEuZGF0YS5jb2RlOyAvL+WQjue7reaQnOe0oueahOWPguaVsCDkuZ/mt7vliqDliLAgZGF0YSDliJfooajkuK0KCiAgICAgICAgICAgICAgICBkYXRhLnB1c2guYXBwbHkoZGF0YSwgX3RvQ29uc3VtYWJsZUFycmF5KGdldERhdGEuZGF0YS5kYXRhKSk7IC8v5q+P5qyh6LCD55So5LmL5ZCOIHBhZ2UgKysKCiAgICAgICAgICAgICAgICBwYWdlKys7IC8v5pCc57Si5LmL5ZCO5Yik5pat5piv5ZCm5pu05pS55LqG5pCc57Si6K+NCgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZ2V0RGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gbG9hZEhvdChfeCkgewogICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCk7IC8v5reY5Y+j5LukCgoKICAgIHZhciB0a2wgPSByZWYoIiIpOyAvL+eCueWHu+WVhuWTgeS/oeaBr+eahOaXtuWAmSDojrflj5bmt5jlj6Pku6QKCiAgICB2YXIgZ2V0VGtsID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihpdGVtX2lkKSB7CiAgICAgICAgdmFyIHRrbERhdGEsIF91c2VDbGlwYm9hcmQsIHRvQ2xpcGJvYXJkOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoImFwaS90YmsvaWRfcHJpdmlsZWdlIiwgewogICAgICAgICAgICAgICAgICBhcGlrZXk6ICJ5Y3E5aHhHR1lkVUc3R1Rka0hCaFFRNzdVc2laRlcyaCIsCiAgICAgICAgICAgICAgICAgIGlkOiBpdGVtX2lkLAogICAgICAgICAgICAgICAgICB0cHdkOiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgdGtsRGF0YSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgLy/mt5jlj6Pku6QKICAgICAgICAgICAgICAgIHRrbC52YWx1ZSA9IHRrbERhdGEuZGF0YS5kYXRhLmxvbmdfY291cG9uX3Rwd2Q7IC8v5aSN5Yi25Yiw57KY6LS05p2/CgogICAgICAgICAgICAgICAgX3VzZUNsaXBib2FyZCA9IHVzZUNsaXBib2FyZCgpLCB0b0NsaXBib2FyZCA9IF91c2VDbGlwYm9hcmQudG9DbGlwYm9hcmQ7CiAgICAgICAgICAgICAgICB0b0NsaXBib2FyZCh0a2wudmFsdWUpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gZ2V0VGtsKF94MikgewogICAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOyAvL+aOp+WItueCueWHu+WVhuWTgeS/oeaBr+WQjueahOaPkOekuuahhiDmmK/lkKbmiZPlvIAv5YWz6ZetCgoKICAgIHZhciBkaWFsb2dWaWV3ID0gcmVmKGZhbHNlKTsKICAgIHJldHVybiB7CiAgICAgIGxvYWRIb3Q6IGxvYWRIb3QsCiAgICAgIGRhdGFDb2RlOiBkYXRhQ29kZSwKICAgICAgc2VhcmNoVmFsdWU6IHNlYXJjaFZhbHVlLAogICAgICBkYXRhOiBkYXRhLAogICAgICBnZXRUa2w6IGdldFRrbCwKICAgICAgdGtsOiB0a2wsCiAgICAgIGRpYWxvZ1ZpZXc6IGRpYWxvZ1ZpZXcKICAgIH07CiAgfQp9Ow=="},{"version":3,"sources":["C:\\F\\vueProject\\learnvue\\src\\components\\Search.vue"],"names":[],"mappings":";;;;AAyEA,OAAO,SAAP,MAAsB,wBAAtB;AACA,OAAO,KAAP,MAAkB,OAAlB;AACA,SAAS,QAAT,EAAmB,GAAnB,QAA8B,iBAA9B;AACA,OAAO,YAAP,MAAyB,gBAAzB;AACA,eAAe;AACb,EAAA,UAAU,EAAE;AACV,IAAA,SAAS,EAAT;AADU,GADC;AAKb,EAAA,KALa,mBAKL;AACN;AACA,QAAI,IAAG,GAAI,CAAX;AACA,QAAI,QAAO,GAAI,GAAG,CAAC,EAAD,CAAlB;AACA,QAAI,IAAG,GAAI,QAAQ,CAAC,EAAD,CAAnB;AACA,QAAI,WAAU,GAAI,GAAG,CAAC,EAAD,CAArB;;AAEA,QAAI,OAAM;AAAA,yEAAI,iBAAO,WAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACZ;AACA,oBAAI,WAAW,CAAC,KAAZ,IAAqB,WAArB,IAAoC,WAAW,CAAC,KAAZ,IAAqB,EAA7D,EAAiE;AAC/D,kBAAA,IAAI,CAAC,MAAL,CAAY,CAAZ;AACF,iBAJY,CAKZ;;;AACA,gBAAA,WAAW,CAAC,KAAZ,GAAoB,WAApB;AANY;AAAA,uBAOQ,KAAK,CAAC,IAAN,CAAW,sBAAX,EAAmC;AACrD,kBAAA,MAAM,EAAE,kCAD6C;AAErD,kBAAA,CAAC,EAAE,WAFkD;AAGrD,kBAAA,IAAI,EAAE,aAH+C;AAIrD,kBAAA,SAAS,EAAE,EAJ0C;AAKrD,kBAAA,OAAO,EAAE;AAL4C,iBAAnC,CAPR;;AAAA;AAOR,gBAAA,OAPQ;AAeZ;AACA,gBAAA,QAAQ,CAAC,KAAT,GAAiB,OAAO,CAAC,IAAR,CAAa,IAA9B,CAhBY,CAiBZ;;AACA,gBAAA,IAAI,CAAC,IAAL,OAAA,IAAI,qBAAS,OAAO,CAAC,IAAR,CAAa,IAAtB,EAAJ,CAlBY,CAmBZ;;AACA,gBAAA,IAAI,GApBQ,CAqBZ;;AACA,gBAAA,OAAO,CAAC,GAAR,CAAY,OAAZ;;AAtBY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAN,OAAM;AAAA;AAAA;AAAA,OAAV,CAPM,CAgCN;;;AACA,QAAI,GAAE,GAAI,GAAG,CAAC,EAAD,CAAb,CAjCM,CAkCN;;AACA,QAAI,MAAK;AAAA,0EAAI,kBAAO,OAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACS,KAAK,CAAC,IAAN,CAAW,sBAAX,EAAmC;AACrD,kBAAA,MAAM,EAAE,kCAD6C;AAErD,kBAAA,EAAE,EAAE,OAFiD;AAGrD,kBAAA,IAAI,EAAE;AAH+C,iBAAnC,CADT;;AAAA;AACP,gBAAA,OADO;AAOX;AACA,gBAAA,GAAG,CAAC,KAAJ,GAAY,OAAO,CAAC,IAAR,CAAa,IAAb,CAAkB,gBAA9B,CARW,CAUX;;AAVW,gCAWa,YAAY,EAXzB,EAWH,WAXG,iBAWH,WAXG;AAYX,gBAAA,WAAW,CAAC,GAAG,CAAC,KAAL,CAAX;;AAZW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAL,MAAK;AAAA;AAAA;AAAA,OAAT,CAnCM,CAkDN;;;AACA,QAAI,UAAS,GAAI,GAAG,CAAC,KAAD,CAApB;AAEA,WAAO;AACL,MAAA,OAAO,EAAP,OADK;AAEL,MAAA,QAAQ,EAAR,QAFK;AAGL,MAAA,WAAW,EAAX,WAHK;AAIL,MAAA,IAAI,EAAJ,IAJK;AAKL,MAAA,MAAM,EAAN,MALK;AAML,MAAA,GAAG,EAAH,GANK;AAOL,MAAA,UAAU,EAAV;AAPK,KAAP;AASD;AAnEY,CAAf","sourcesContent":["<template>\r\n  <SearchBar\r\n    rhd=\"来搜索想买的东西吧-全力查找优惠!\"\r\n    @search=\"loadHot\"\r\n  ></SearchBar>\r\n  <div class=\"weui-panel weui-panel_access\" v-if=\"dataCode === 200\">\r\n    <div\r\n      v-for=\"(item, index) in data\"\r\n      :key=\"index\"\r\n      class=\"weui-panel__bd\"\r\n      @click=\"\r\n        getTkl(item.item_id);\r\n        dialogView = true;\r\n      \"\r\n      style=\"cursor: pointer\"\r\n    >\r\n      <a class=\"weui-media-box weui-media-box_appmsg\" target=\"_blank\">\r\n        <div class=\"weui-media-box__hd\">\r\n          <img\r\n            class=\"weui-media-box__thumb\"\r\n            :src=\"item.pict_url + '_100x100.jpg'\"\r\n          />\r\n        </div>\r\n        <div class=\"weui-media-box__bd\">\r\n          <h4 class=\"weui-media-box__title\" v-text=\"item.title\"></h4>\r\n          <h4 class=\"weui-media-box__title\">\r\n            券后包邮仅需: {{ item.zk_final_price }} || 机器人再返:\r\n            {{\r\n              (\r\n                item.zk_final_price *\r\n                (item.commission_rate * 0.0001) *\r\n                0.6\r\n              ).toFixed(2)\r\n            }}\r\n          </h4>\r\n          <p class=\"weui-media-box__desc\" v-text=\"item.item_description\"></p>\r\n        </div>\r\n      </a>\r\n    </div>\r\n    <div @click=\"loadHot(searchValue)\" class=\"weui-panel__ft\">\r\n      <a\r\n        href=\"javascript:void(0);\"\r\n        class=\"weui-cell weui-cell_access weui-cell_link\"\r\n      >\r\n        <div class=\"weui-cell__bd\">查看更多</div>\r\n        <span class=\"weui-cell__ft\"></span>\r\n      </a>\r\n    </div>\r\n    <div class=\"weui-dialog\" v-if=\"dialogView\">\r\n      <div class=\"weui-dialog__hd\">\r\n        <strong class=\"weui-dialog__title\" id=\"js_title1\">温馨提示</strong>\r\n      </div>\r\n      <div class=\"weui-dialog__bd\">\r\n        如果打开手淘客户端没有显示的话,请手动复制以下淘口令再打开\r\n        <br />\r\n        {{ tkl }}\r\n      </div>\r\n      <div class=\"weui-dialog__ft\">\r\n        <a\r\n          role=\"button\"\r\n          class=\"weui-dialog__btn weui-dialog__btn_primary\"\r\n          @click=\"\r\n            dialogView = false;\r\n            tkl = '';\r\n          \"\r\n          >我知道了</a\r\n        >\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SearchBar from \"@/components/SearchBar\";\r\nimport axios from \"axios\";\r\nimport { reactive, ref } from \"@vue/reactivity\";\r\nimport useClipboard from \"vue-clipboard3\";\r\nexport default {\r\n  components: {\r\n    SearchBar,\r\n  },\r\n\r\n  setup() {\r\n    //当前搜索的页数\r\n    let page = 1;\r\n    let dataCode = ref(\"\");\r\n    let data = reactive([]);\r\n    let searchValue = ref(\"\");\r\n\r\n    let loadHot = async (searchTitle) => {\r\n      //如果更换了搜索词 就删除之前的列表数据 重载新搜索词的结果\r\n      if (searchValue.value != searchTitle && searchValue.value != \"\") {\r\n        data.splice(0);\r\n      }\r\n      //传递过来的searchValue 设置成组件全局变量 方便查看更多数据\r\n      searchValue.value = searchTitle;\r\n      let getData = await axios.post(\"api/tbk/super_search\", {\r\n        apikey: \"ycq9hxGGYdUG7GTdkHBhQQ77UsiZFW2h\",\r\n        q: searchTitle,\r\n        sort: \"total_sales\",\r\n        page_size: 20,\r\n        page_on: page,\r\n      });\r\n\r\n      //获取API请求代码\r\n      dataCode.value = getData.data.code;\r\n      //后续搜索的参数 也添加到 data 列表中\r\n      data.push(...getData.data.data);\r\n      //每次调用之后 page ++\r\n      page++;\r\n      //搜索之后判断是否更改了搜索词\r\n      console.log(getData);\r\n    };\r\n\r\n    //淘口令\r\n    let tkl = ref(\"\");\r\n    //点击商品信息的时候 获取淘口令\r\n    let getTkl = async (item_id) => {\r\n      let tklData = await axios.post(\"api/tbk/id_privilege\", {\r\n        apikey: \"ycq9hxGGYdUG7GTdkHBhQQ77UsiZFW2h\",\r\n        id: item_id,\r\n        tpwd: true,\r\n      });\r\n\r\n      //淘口令\r\n      tkl.value = tklData.data.data.long_coupon_tpwd;\r\n\r\n      //复制到粘贴板\r\n      const { toClipboard } = useClipboard();\r\n      toClipboard(tkl.value);\r\n    };\r\n\r\n    //控制点击商品信息后的提示框 是否打开/关闭\r\n    let dialogView = ref(false);\r\n\r\n    return {\r\n      loadHot,\r\n      dataCode,\r\n      searchValue,\r\n      data,\r\n      getTkl,\r\n      tkl,\r\n      dialogView,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.weui-dialog__hd {\r\n  color: RGB(0, 128, 0);\r\n}\r\n\r\n</style>"],"sourceRoot":""}]}